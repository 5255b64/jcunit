<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <title>JCUnit by dakusui</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>JCUnit</h1>
        <h2>A combinatorial testing framework on top of JUnit. It makes your testing life a lot easier.</h2>

        <section id="downloads">
          <a href="https://github.com/dakusui/jcunit/zipball/master" class="btn">Download as .zip</a>
          <a href="https://github.com/dakusui/jcunit/tarball/master" class="btn">Download as .tar.gz</a>
          <a href="https://github.com/dakusui/jcunit" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>
<a name="jcunit" class="anchor" href="#jcunit"><span class="octicon octicon-link"></span></a>JCUnit</h1>

<p>JCUnit is a framework to perform combinatorial tests using 'pairwise'(or more generally 't-wise') technique.
About what combinatorial testings are, an Wikipedia article below might be helpful as a starting point.</p>

<ul>
<li><a href="http://en.wikipedia.org/wiki/All-pairs_testing">All-pairs testing</a></li>
</ul><p>Very roughly to say, it's a technique to generate test cases with good 'coverage' without making the number of test cases explode.</p>

<h1>
<a name="for-users-of-previous-versions" class="anchor" href="#for-users-of-previous-versions"><span class="octicon octicon-link"></span></a>For users of previous versions</h1>

<p>Thank you for using JCUnit.
In this release, I have simplified JCUnit's interfaces and I had to remove some features like automatic regression tests, 
reporting, or writing tests as logical predicates.
Furthermore, names and semantics of annotations were changed and basically JCUnit 0.3.0 (or later) isn't compatible with the previous versions anymore.
Although the removed functions might be provided as a part of JCUnit's core library itself or JCUnit-extra library 
(and of course they will become more sophisticated) in future, they are not available at this moment.
So, if you need these features, please keep using the older version for the time being. </p>

<h1>
<a name="first-test-with-jcunit" class="anchor" href="#first-test-with-jcunit"><span class="octicon octicon-link"></span></a>First test with JCUnit</h1>

<p>Below is JCUnit's most basic example 'QuadraticEquationSolver.java'.
Just by running QuadraticEquationSolverTest.java as a usual JUnit test, JCUnit will automatically generate test cases based on '@FactorLevels' annotations.</p>

<h2>
<a name="quadraticequationsolver-program-example" class="anchor" href="#quadraticequationsolver-program-example"><span class="octicon octicon-link"></span></a>QuadraticEquationSolver program example</h2>

<p>To understand JCUnit's functions, let's test 'QuadraticEquationSolver.java' program, which solves 'quadratic equations' using a formula.
The program contains some intentional bugs and unclear specifications (or behaviors).
The formula it uses is,</p>

<div class="highlight highlight-java"><pre>
    <span class="o">{</span><span class="n">x1</span><span class="o">,</span> <span class="n">x2</span><span class="o">}</span> <span class="o">=</span> <span class="o">{</span> <span class="o">(-</span><span class="n">b</span> <span class="o">+</span> <span class="n">Math</span><span class="o">.</span><span class="na">sqrt</span><span class="o">(</span><span class="n">b</span><span class="o">*</span><span class="n">b</span> <span class="o">-</span> <span class="mi">4</span><span class="o">*</span><span class="n">c</span><span class="o">*</span><span class="n">a</span><span class="o">))</span> <span class="o">/</span> <span class="mi">2</span><span class="o">*</span><span class="n">a</span><span class="o">,</span> <span class="o">(-</span><span class="n">b</span> <span class="o">-</span> <span class="n">Math</span><span class="o">.</span><span class="na">sqrt</span><span class="o">(</span><span class="n">b</span><span class="o">*</span><span class="n">b</span> <span class="o">-</span> <span class="mi">4</span><span class="o">*</span><span class="n">c</span><span class="o">*</span><span class="n">a</span><span class="o">))</span> <span class="o">/</span> <span class="mi">2</span><span class="o">*</span><span class="n">a</span> <span class="o">}</span>

</pre></div>

<p>where {x1, x2} are the solutions of an equation, </p>

<div class="highlight highlight-java"><pre>
    <span class="n">a</span> <span class="o">*</span> <span class="n">x</span><span class="o">^</span><span class="mi">2</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">x</span> <span class="o">+</span> <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span>

</pre></div>

<h3>
<a name="maven-coordinate" class="anchor" href="#maven-coordinate"><span class="octicon octicon-link"></span></a>Maven coordinate</h3>

<p>First of all, you will need to link JCUnit to your project.
Below is a pom.xml fragment to describe jcunit's dependency.
Please add it to your project's pom.xml </p>

<div class="highlight highlight-xml"><pre>
    <span class="nt">&lt;dependency&gt;</span>
      <span class="nt">&lt;groupId&gt;</span>com.github.dakusui<span class="nt">&lt;/groupId&gt;</span>
      <span class="nt">&lt;artifactId&gt;</span>jcunit<span class="nt">&lt;/artifactId&gt;</span>
      <span class="nt">&lt;version&gt;</span>[0.4.11,]<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>

</pre></div>

<h3>
<a name="quadraticequationsolverjava-main-class-sut" class="anchor" href="#quadraticequationsolverjava-main-class-sut"><span class="octicon octicon-link"></span></a>QuadraticEquationSolver.java (Main class, SUT)</h3>

<p>'QuadraticEquationSolver' is the SUT (Software under test) in this example.
The class provides a function to solve a quadratic equation using a quadratic formula and returns the solutions.</p>

<div class="highlight highlight-java"><pre>
    <span class="c1">//QuadraticEquationSolver.java</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">QuadraticEquationSolver</span> <span class="o">{</span>
      <span class="kd">private</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">a</span><span class="o">;</span>
      <span class="kd">private</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">b</span><span class="o">;</span>
      <span class="kd">private</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">c</span><span class="o">;</span>

      <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">Solutions</span> <span class="o">{</span>
        <span class="kd">public</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">x1</span><span class="o">;</span>
        <span class="kd">public</span> <span class="kd">final</span> <span class="kt">double</span> <span class="n">x2</span><span class="o">;</span>

        <span class="kd">public</span> <span class="nf">Solutions</span><span class="o">(</span><span class="kt">double</span> <span class="n">x1</span><span class="o">,</span> <span class="kt">double</span> <span class="n">x2</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">this</span><span class="o">.</span><span class="na">x1</span> <span class="o">=</span> <span class="n">x1</span><span class="o">;</span>
          <span class="k">this</span><span class="o">.</span><span class="na">x2</span> <span class="o">=</span> <span class="n">x2</span><span class="o">;</span>
        <span class="o">}</span>

        <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
          <span class="k">return</span> <span class="n">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"(%f,%f)"</span><span class="o">,</span> <span class="n">x1</span><span class="o">,</span> <span class="n">x2</span><span class="o">);</span>
        <span class="o">}</span>
      <span class="o">}</span>

      <span class="kd">public</span> <span class="nf">QuadraticEquationSolver</span><span class="o">(</span><span class="kt">double</span> <span class="n">a</span><span class="o">,</span> <span class="kt">double</span> <span class="n">b</span><span class="o">,</span> <span class="kt">double</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">a</span> <span class="o">=</span> <span class="n">a</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">b</span> <span class="o">=</span> <span class="n">b</span><span class="o">;</span>
        <span class="k">this</span><span class="o">.</span><span class="na">c</span> <span class="o">=</span> <span class="n">c</span><span class="o">;</span>
      <span class="o">}</span>

      <span class="kd">public</span> <span class="n">Solutions</span> <span class="nf">solve</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nf">Solutions</span><span class="o">(</span>
            <span class="o">(-</span><span class="n">b</span> <span class="o">+</span> <span class="n">Math</span><span class="o">.</span><span class="na">sqrt</span><span class="o">(</span><span class="n">b</span> <span class="o">*</span> <span class="n">b</span> <span class="o">-</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">c</span> <span class="o">*</span> <span class="n">a</span><span class="o">))</span> <span class="o">/</span> <span class="o">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">a</span><span class="o">),</span>
            <span class="o">(-</span><span class="n">b</span> <span class="o">-</span> <span class="n">Math</span><span class="o">.</span><span class="na">sqrt</span><span class="o">(</span><span class="n">b</span> <span class="o">*</span> <span class="n">b</span> <span class="o">-</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">c</span> <span class="o">*</span> <span class="n">a</span><span class="o">))</span> <span class="o">/</span> <span class="o">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">a</span><span class="o">)</span>
        <span class="o">);</span>
      <span class="o">}</span>
    <span class="o">}</span>
</pre></div>

<p>Did you already notice the bugs that this program has?</p>

<ul>
<li>It doesn't consider equations that do not have solutions in real.</li>
<li>If it's not a quadratic equation but a linear one, how should it behave?</li>
<li>Errors. How should it handle errors? To what extent error is acceptable?</li>
<li>Overflows. If b * b, 4 * c * a, etc become bigger than Double.MAX_VALUE (or smaller than Double.MIN_VALUE), how should it handle it?</li>
<li>Shouldn't we set some limits for a, b, and c? Both to make errors small enough and prevent overflows happen.</li>
<li>etc. (maybe)</li>
</ul><p>Try to find (and reproduce) these bugs using JCUnit and fix them.</p>

<h3>
<a name="quadraticequationsolvertestjava-test" class="anchor" href="#quadraticequationsolvertestjava-test"><span class="octicon octicon-link"></span></a>QuadraticEquationSolverTest.java (Test)</h3>

<p>QuadraticEquationSolverTest1 is a test class for QuadraticEquationSolver class.</p>

<div class="highlight highlight-java"><pre>
    <span class="c1">// QuadraticEquationSolverTest1.java</span>
    <span class="nd">@RunWith</span><span class="o">(</span><span class="n">JCUnit</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">QuadraticEquationSolverTest1</span> <span class="o">{</span>
        <span class="nd">@FactorField</span>
        <span class="kd">public</span> <span class="kt">int</span> <span class="n">a</span><span class="o">;</span>
        <span class="nd">@FactorField</span>
        <span class="kd">public</span> <span class="kt">int</span> <span class="n">b</span><span class="o">;</span>
        <span class="nd">@FactorField</span>
        <span class="kd">public</span> <span class="kt">int</span> <span class="n">c</span><span class="o">;</span>

        <span class="nd">@Test</span>
        <span class="kd">public</span> <span class="kt">void</span> <span class="nf">test</span><span class="o">()</span> <span class="o">{</span>
            <span class="n">QuadraticEquationSolver</span><span class="o">.</span><span class="na">Solutions</span> <span class="n">s</span> <span class="o">=</span> <span class="k">new</span> <span class="nf">QuadraticEquationSolver</span><span class="o">(</span><span class="n">a</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span>
                    <span class="n">c</span><span class="o">).</span><span class="na">solve</span><span class="o">();</span>
            <span class="n">assertEquals</span><span class="o">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="n">a</span> <span class="o">*</span> <span class="n">s</span><span class="o">.</span><span class="na">x1</span> <span class="o">*</span> <span class="n">s</span><span class="o">.</span><span class="na">x1</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">s</span><span class="o">.</span><span class="na">x1</span> <span class="o">+</span> <span class="n">c</span><span class="o">);</span>
            <span class="n">assertEquals</span><span class="o">(</span><span class="mf">0.0</span><span class="o">,</span> <span class="n">a</span> <span class="o">*</span> <span class="n">s</span><span class="o">.</span><span class="na">x2</span> <span class="o">*</span> <span class="n">s</span><span class="o">.</span><span class="na">x2</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">s</span><span class="o">.</span><span class="na">x2</span> <span class="o">+</span> <span class="n">c</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

</pre></div>

<p>If you run this test class, JCUnit generates about fifty test cases and run them.
By default, it generates the test cases by using 'all-pairs' technique.</p>

<h1>
<a name="tips" class="anchor" href="#tips"><span class="octicon octicon-link"></span></a>Tips</h1>

<h2>
<a name="tip-1-customizing-domains-of-factorfield-annotated-fields-1" class="anchor" href="#tip-1-customizing-domains-of-factorfield-annotated-fields-1"><span class="octicon octicon-link"></span></a>Tip 1: Customizing domains of @FactorField annotated fields (1)</h2>

<p>JCUnit creates test cases by assigning a value, picked up from a hardcoded set of values defined for each type, to each '@FactorField' annotated field in a test class.
For example, if a member is annotated with '@FactorField' and its type is int, JCUnit will pick up a value from a set
{1, 0, -1, 100, -100, Integer.MAX_VALUE, Integer.MIN_VALUE}.
But this set is just a 'default' and you can customize it by using (overriding) an 'xyzLevels' attribute of a '@FactorField' annotation, 
where 'xyz' is a primitive types.</p>

<div class="highlight highlight-java"><pre>
    <span class="nd">@FactorField</span><span class="o">(</span><span class="n">intLevels</span> <span class="o">=</span> <span class="o">{</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">,</span> <span class="mi">100</span><span class="o">,</span> <span class="o">-</span><span class="mi">100</span><span class="o">,</span> <span class="mi">10000</span><span class="o">,</span> <span class="o">-</span><span class="mi">10000</span> <span class="o">})</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">a</span><span class="o">;</span>

</pre></div>

<p>Above is an example of the use the 'intLevels' attribute.</p>

<h2>
<a name="tip-2-customizing-domains-of-factorfield-annotated-fields-2" class="anchor" href="#tip-2-customizing-domains-of-factorfield-annotated-fields-2"><span class="octicon octicon-link"></span></a>Tip 2: Customizing domains of @FactorField annotated fields (2)</h2>

<p>By using 'levelsFactory' parameter of '@FactorField' and creating a static method whose name is the same as the annotated field's name,
you can customize the domain of a certain field in a much more flexible way.</p>

<p>The method mustn't have any parameters and its return value must be an array of the field's type.</p>

<p>Below is the example for that sort of function.</p>

<div class="highlight highlight-java"><pre>
    <span class="nd">@FactorField</span><span class="o">(</span><span class="n">levelsFactory</span> <span class="o">=</span> <span class="n">MethodLevelsFactory</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="n">a</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span><span class="o">[]</span> <span class="nf">a</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[]{</span><span class="mi">0</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">};</span>
    <span class="o">}</span>

</pre></div>

<p>The values returned by the method will be picked up and assigned to the field 'a' by the framework one by one.
And you need to use 'levelsFactory' attribute when you are going to use non-primitive, non-enum, nor non-string values as levels for a factor.</p>

<h2>
<a name="tip-3-customizing-the-strength-of-t-wise-testing" class="anchor" href="#tip-3-customizing-the-strength-of-t-wise-testing"><span class="octicon octicon-link"></span></a>Tip 3: Customizing the strength of t-wise testing.</h2>

<p>Add parameter 'generator = <a href="https://github.com/Generator" class="user-mention">@Generator</a>(IPO2TestCaseGenerator.class)' explicitly to the '@TestCaseGeneration',
annotation for 'QuadraticEquationSolverTest1.java' and set the first parameter, which represents a 'strength'. </p>

<div class="highlight highlight-java"><pre>
    <span class="nd">@RunWith</span><span class="o">(</span><span class="n">JCUnit</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="nd">@TestCaseGeneration</span><span class="o">(</span>
            <span class="n">generator</span> <span class="o">=</span> <span class="nd">@Generator</span><span class="o">(</span>
                    <span class="n">value</span> <span class="o">=</span> <span class="n">IPO2TestCaseGenerator</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
                    <span class="n">params</span> <span class="o">=</span> <span class="o">{</span> <span class="nd">@Param</span><span class="o">(</span><span class="s">"3"</span><span class="o">)</span> <span class="o">}))</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">QuadraticEquationSolverTest1</span> <span class="o">{</span>
</pre></div>

<p>In this example, the line</p>

<div class="highlight highlight-java"><pre>
    <span class="n">params</span> <span class="o">=</span> <span class="o">{</span> <span class="nd">@Param</span><span class="o">(</span><span class="s">"3"</span><span class="o">)</span> <span class="o">}))</span>

</pre></div>

<p>configures the strength of the t-wise tests performed by JCUnit.</p>

<p>And '<a href="https://github.com/Param" class="user-mention">@Param</a>' annotation is a standard way to give a parameter to JCUnit plugins (excepting '@FactorLevels', which requires more conciseness). 
It takes a string array as its 'value'(and remember that you can omit curly braces if there is only one element in the array). 
JCUnit internally translates those values accordingly.</p>

<h2>
<a name="tip-4-defining-constraints" class="anchor" href="#tip-4-defining-constraints"><span class="octicon octicon-link"></span></a>Tip 4: Defining constraints.</h2>

<p>In testings, we sometimes want to exclude a certain pair (, a triple, or a tuple) from the test cases since there are constraints in the test domain.</p>

<p>For example, suppose there is a software system which has 100 parameters and doesn't accept any larger value than 1,000 for parameter x1.
And it validates all the parameters and immediately exits if any one of them is invalid at start up.</p>

<p>Combinatorial testing is an effort to cover pairs (or tuples) with test cases as less as possible to find bugs which cannot be found by testing any single input parameter.
If a test case, which can possibly contain a lot of meaningful pairs, is revoked by a single parameter, it means the coverage of the test suite will be damaged. 
Below are the links that would be helpful for understanding how much constraint managements are important in combinatorial testing area. </p>

<ul>
<li><a href="http://ieeexplore.ieee.org/xpl/articleDetails.jsp?reload=true&amp;arnumber=6221818">Combinatorial test cases with constraints in software systems</a></li>
<li><a href="http://ieeexplore.ieee.org/xpl/articleDetails.jsp?reload=true&amp;arnumber=6569736">An Efficient Algorithm for Constraint Handling in Combinatorial Test Generation</a></li>
</ul><p>(Of course we want to test the behaviors on such illegal inputs. It will be discussed in the next tip.) </p>

<p>For this purpose, JCUnit has a mechanism called 'constraints manager'.
To use a constraint manager, you can do below</p>

<div class="highlight highlight-java"><pre>
    <span class="nd">@RunWith</span><span class="o">(</span><span class="n">JCUnit</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="nd">@TestCaseGeneration</span><span class="o">(</span>
        <span class="n">constraint</span> <span class="o">=</span> <span class="nd">@Constraint</span><span class="o">(</span>
            <span class="n">value</span> <span class="o">=</span> <span class="n">QuadraticEquationSolverTestX</span><span class="o">.</span><span class="na">CM</span><span class="o">.</span><span class="na">class</span> <span class="o">))</span>
    <span class="kd">public</span> <span class="kd">class</span> <span class="nc">QuadraticEquationSolverTestX</span> <span class="o">{</span>
    <span class="o">...</span>
</pre></div>

<p>'CM' is a name of inner class which implements 'ConstraintManager' interface and checks if a given tuple violates any constraints in the test domain or not.
Unfortunately you cannot use anonymous classes because a value passed to an annotation as its parameter must be a constant and Java's anonymous classes cannot be one.</p>

<p>If you want to exclude test cases that violate a discriminant of the quadratic equation formula and also make sure the given equation is a quadratic, 
not a linear, the definition of 'CM' would be</p>

<div class="highlight highlight-java"><pre>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">CM</span> <span class="kd">extends</span> <span class="n">ConstraintManagerBase</span> <span class="o">{</span>
        <span class="nd">@Override</span>
        <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">check</span><span class="o">(</span><span class="n">Tuple</span> <span class="n">tuple</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">JCUnitSymbolException</span> <span class="o">{</span>
          <span class="k">if</span> <span class="o">(!</span><span class="n">tuple</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="s">"a"</span><span class="o">)</span> <span class="o">||</span> <span class="o">!</span><span class="n">tuple</span><span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="s">"b"</span><span class="o">)</span> <span class="o">||</span> <span class="o">!</span><span class="n">tuple</span>
              <span class="o">.</span><span class="na">containsKey</span><span class="o">(</span><span class="s">"c"</span><span class="o">))</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">UndefinedSymbol</span><span class="o">();</span>
          <span class="o">}</span>
          <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="o">(</span><span class="n">Integer</span><span class="o">)</span> <span class="n">tuple</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"a"</span><span class="o">);</span>
          <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="o">(</span><span class="n">Integer</span><span class="o">)</span> <span class="n">tuple</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"b"</span><span class="o">);</span>
          <span class="kt">int</span> <span class="n">c</span> <span class="o">=</span> <span class="o">(</span><span class="n">Integer</span><span class="o">)</span> <span class="n">tuple</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"c"</span><span class="o">);</span>
          <span class="k">return</span> <span class="n">a</span> <span class="o">!=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">b</span> <span class="o">*</span> <span class="n">b</span> <span class="o">-</span> <span class="mi">4</span> <span class="o">*</span> <span class="n">c</span> <span class="o">*</span> <span class="n">a</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
</pre></div>

<p>'ConstraintManagerBase' is a helper class that makes it easy to implement a ConstraintManager.
All that you need is overriding 'boolean check(Tuple)' method.
In case the passed tuple violates your constraints, make it return false.
A test case is passed as a tuple, you need to use 'get' method of it to retrieve the value (level) of it.</p>

<p>"a", "b", or "c" are the names of the fields annotated with '@FactorField'. JCUnit accesses them using 'reflection' techniques of Java.
JCUnit avoids using tuples for which check method of the specified constraint manager returns 'false'.</p>

<h2>
<a name="tip-5-writing-test-cases-for-error-handling-negative-tests" class="anchor" href="#tip-5-writing-test-cases-for-error-handling-negative-tests"><span class="octicon octicon-link"></span></a>Tip 5: Writing test cases for error handling (negative tests)</h2>

<p>That being said, handling errors appropriately is another concern.
A program must complain of invalid parameters in an appropriate way.
And this characteristic is another aspect of software under test to be tested.</p>

<p>You can do it by overriding 'getViolations' method of a constraint manager and switching the verification procedures based on a test's 'sub-identifier'.</p>

<p>First, by overriding method, return test cases that explicitly violate the constraint represented by the constraint manager class itself.</p>

<pre><code>
    public static class CM extends ConstraintManagerBase {
        @Override
        public boolean check(Tuple tuple) throws JCUnitSymbolException {
            ...
        }

        @Override
        public List&lt;Tuple&gt; getViolations() {
            List&lt;Tuple&gt; ret = new LinkedList&lt;Tuple&gt;();
            ret.add(createTestCase("a=0", createTestCase(0, 1, 1)));
            ret.add(createTestCase("b*b-4ca&lt;0", createTestCase(100, 1, 100)));
            ret.add(createTestCase("nonsense 1=0", createTestCase(0, 0, 1)));
            return ret;
        }

        private Tuple createTestCase(int a, int b, int c) {
            return new Tuple.Builder().put("a", a).put("b", b).put("c", c).build();
        }
    }
</code></pre>

<p>Now you enhance your test case so that it verifies the software under test behaves correctly in case invalid parameters are given.
Let's assume that the SUT should return null if one of the parameters 'a', 'b', or 'c' is not valid. </p>

<pre><code>
    @Test
    public void test() {
        if ("a=0".equals(desc.getSubIdentifier())) {
          assertEquals(null, s);
        } else if ("b*b-4ca&lt;0".equals(desc.getSubIdentifier())) {
          assertEquals(null, s);
        } else if ("nonsense 1=0".equals(desc.getSubIdentifier())) {
          assertEquals(null, s);
        } else {
            QuadraticEquationSolver.Solutions s = new QuadraticEquationSolver(a, b,
                    c).solve();
            assertEquals(0.0, a * s.x1 * s.x1 + b * s.x1 + c);
            assertEquals(0.0, a * s.x2 * s.x2 + b * s.x2 + c);
        }
    }
</code></pre>

<h1>
<a name="examples" class="anchor" href="#examples"><span class="octicon octicon-link"></span></a>Examples</h1>

<p>For more examples, see</p>

<ul>
<li><a href="https://github.com/dakusui/jcunit/tree/develop/src/test/java/com/github/dakusui/jcunit/examples/quadraticequation">Examples</a></li>
</ul><h1>
<a name="copyright-and-license" class="anchor" href="#copyright-and-license"><span class="octicon octicon-link"></span></a>Copyright and license</h1>

<p>Copyright 2013 Hiroshi Ukai.</p>

<p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this work except in compliance with the License.
You may obtain a copy of the License in the LICENSE file, or at:</p>

<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a></p>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>
      </section>
    </div>

    
  </body>
</html>